<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Join | ChatApp</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/jquery-3.2.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable =no">
</head>
<!-- Start of chat.io (www.chat.io) code -->
<!-- Start of chat.io (www.chat.io) code -->
<script type="text/javascript">
    (function(c, h, a, t) {
      c[t]=c[t]||function(){(c[t].q=c[t].q||[]).push(arguments)};
      c[t].license = 9948405;
      c[t].d=+new Date;
      var j = h.createElement(a); j.type = 'text/javascript'; j.async = true;
      j.src = 'https://cdn.chatio-static.com/widget/init/script.' + c[t].license + '.js';
      var s = h.getElementsByTagName(a)[0]; s.parentNode.insertBefore(j, s);
    })(window, document, 'script', '__chatio');
  </script>
  <!-- End of chat.io code -->
<style>
    .powerdBy {
        visibility: hidden;
    }
</style>
<!-- End of chat.io code -->
<script>
    $(window).on("load", ready);

    function ready() {
        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;

        var element = document.querySelector('#chatio-container');
        // setTimeout(function () {
        //     element.setAttribute('data-text', 'whatever');
        // }, 5000)
        var iframe = document.getElementById("chatio");
        var elem = iframe.contentWindow.document.getElementByClass('powerdBy')[0];
        var observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
                console.log(mutation)
                if (mutation.type == "attributes") {
                    console.log("attributes changed")
                    var elem = iframe.contentWindow.document.getElementsClass('powerdBy')[0];
                    console.log(elem)
                }
            });
        });

        observer.observe(element, {
            attributes: true //configure it to listen to attribute changes
        });
    }
</script>

<body class="centered-form">
    <div class="centered-form__form">
        <form action="/chat.html">
            <div class="form-field">
                <h3>Join a chat</h3>
            </div>
            <div class="form-field">
                <label>Display name</label>
                <input type="text" name="name" autofocus </div>
                <div class="form-field">

                    <label>Room Name</label>
                    <input type="text" name="room" </div>
                    <div class="form-field">
                        <button>Join</button>
                    </div>

        </form>
        </div>
</body>

</html>